# æ ¼å¼åˆ—è¡¨å’Œ MCWorld å‘½åè§„åˆ™

## ğŸ“‹ æ”¯æŒçš„æ ¼å¼åˆ—è¡¨

æ ¹æ®æºç  `æºç /modules/WaterStructure/structure/pool.go`ï¼Œæ€»å…±æ”¯æŒ **37 ç§æ ¼å¼**ï¼š

### Java ç‰ˆæ ¼å¼ï¼ˆ4ç§ï¼‰
1. **Schematic** - Java ç‰ˆç»å…¸æ ¼å¼ (.schematic)
2. **SchemV1** - æ–°ç‰ˆ Schematic æ ¼å¼ (.schem)
3. **SchemV2** - V2 ç‰ˆæœ¬ï¼ˆä¿®æ”¹äº†æ ‡ç­¾ä½ç½®ï¼‰
4. **Litematic** - Litematica æŠ•å½±æ ¼å¼ (.litematic)

### åŸºå²©ç‰ˆæ ¼å¼ï¼ˆ2ç§ï¼‰
5. **MCStructure** - åŸºå²©ç‰ˆç»“æ„æ–‡ä»¶ (.mcstructure)
6. **MCWorld** - åŸºå²©ç‰ˆä¸–ç•Œæ–‡ä»¶ (.mcworld)

### ç¬¬ä¸‰æ–¹å·¥å…·æ ¼å¼ï¼ˆ8ç§ï¼‰
7. **BDX** - PhoenixBuilder å»ºç­‘æ ¼å¼ (.bdx)
8. **Construction** - Amulet æ ¼å¼ï¼ˆç–‘ä¼¼ MOJANG åºŸå¼ƒï¼‰(.construction)
9. **AxiomBP** - Axiom æŠ•å½±æ ¼å¼ (.bp)
10. **MCFunction** - BuildTool äº§å‡º (.mcfunction, .txt)
11. **KBDX** - ä¸‡èŠ±ç­’å»ºç­‘æ ¼å¼ (.kbdx)
12. **IBImport** - InfiniteBot å»ºç­‘æ ¼å¼ (.ibi)
13. **TIBI** - InfiniteBot å»ºç­‘æ ¼å¼ï¼ˆç–‘ä¼¼åºŸç¨¿ï¼‰(.tibi)
14. **CovStructure** - Eggylan å»ºç­‘æ ¼å¼ï¼ŒMCStructure çš„ JSON ç‰ˆ (.covstructure)

### å›½å†…å·¥å…·æ ¼å¼ï¼ˆ23ç§ï¼‰

#### ç»µç¾Šç³»åˆ—ï¼ˆ4ç§ï¼‰
15. **MianYangV1** - ç»µç¾Š JSON (.json)
16. **MianYangV2** - ç»µç¾Š JSON (.json)
17. **MianYangV3** - ç»µç¾Š V2 å‹ç¼©ç‰ˆæœ¬ (.building)
18. **MianYangV4** - ç»µç¾Š V2 äºŒè¿›åˆ¶å‹ç¼©ç‰ˆæœ¬ (.buildingX)

#### é’¢æ¿ç³»åˆ—ï¼ˆ7ç§ï¼‰
19. **GangBanV1** - é’¢æ¿ JSON (.json)
20. **GangBanV2** - é’¢æ¿ JSON (.json)
21. **GangBanV3** - é’¢æ¿ JSON (.json)
22. **GangBanV4** - é’¢æ¿ JSON (.json)
23. **GangBanV5** - é’¢æ¿ JSON (.json)
24. **GangBanV6** - é’¢æ¿ JSON (.reb)
25. **GangBanV7** - é’¢æ¿ V6 å‹ç¼©ç‰ˆæœ¬ (.reb)

#### å…¶ä»–å›½å†…å·¥å…·ï¼ˆ12ç§ï¼‰
26. **RunAway** - è·‘è·¯ JSON (.json)
27. **QingXuV1** - æƒ…ç»ª JSON (.json)
28. **TimeBuilderV1** - TimeBuilder JSON (.json)
29. **FuHongV1** - æµ®é¸¿ JSON (.json)
30. **FuHongV2** - æµ®é¸¿ JSON (.json)
31. **FuHongV3** - æµ®é¸¿ JSON (.json)
32. **FuHongV4** - æµ®é¸¿ JSON (.json)
33. **FuHongV5** - æµ®é¸¿ V4 å‹ç¼©åŠ å¯†ç‰ˆæœ¬ (.fhbuild)
34. **BDS** - Consensus å»ºç­‘æ ¼å¼ï¼Œä½¿ç”¨ MsgPack ç¼–ç  (.bds)
35. **SIBI** - è™¹æ¬ çš„ InfiniteBot åˆ†æ”¯å»ºç­‘æ ¼å¼ (.sibi)
36. **BCF** - bxy çš„å»ºç­‘æ ¼å¼ (.bcf)
37. **NexusNP** - Nexus å»ºç­‘æ ¼å¼ï¼Œä½¿ç”¨ MsgPack ç¼–ç  (.np)

## ğŸ“ MCWorld å‘½åè§„åˆ™

### æ ‡å‡†å‘½åæ ¼å¼

å½“ç»“æ„æ–‡ä»¶è½¬æ¢ä¸º MCWorld æ—¶ï¼Œä¸–ç•Œåç§°ï¼ˆLevelNameï¼‰ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š

```
{ç»“æ„æ–‡ä»¶å}@[0,-64,0]~[{width-1},{height-64-1},{length-1}]
```

### æ ¼å¼è¯´æ˜

- **ç»“æ„æ–‡ä»¶å**: å»é™¤æ‰©å±•ååçš„æ–‡ä»¶å
- **èµ·å§‹åæ ‡**: å›ºå®šä¸º `[0,-64,0]`
  - X: 0
  - Y: -64ï¼ˆåŸºå²©ç‰ˆä¸–ç•Œæœ€ä½ç‚¹ï¼‰
  - Z: 0
- **ç»“æŸåæ ‡**: æ ¹æ®ç»“æ„å°ºå¯¸è®¡ç®—
  - X: `width - 1`
  - Y: `height - 64 - 1`ï¼ˆå› ä¸ºèµ·å§‹ Y æ˜¯ -64ï¼‰
  - Z: `length - 1`

### ä»£ç å®ç°

```go
structureName := strings.TrimSuffix(filepath.Base(srcPath), filepath.Ext(srcPath))
worldName := fmt.Sprintf("%s@[0,-64,0]~[%d,%d,%d]",
    structureName,
    size.Width-1,
    size.Height-64-1,
    size.Length-1,
)
bedrockWorld.LevelDat().LevelName = worldName
```

### ç¤ºä¾‹

å‡è®¾æœ‰ä¸€ä¸ªç»“æ„æ–‡ä»¶ `castle.schematic`ï¼Œå°ºå¯¸ä¸ºï¼š
- Width: 100
- Height: 50
- Length: 80

ç”Ÿæˆçš„ä¸–ç•Œåç§°å°†æ˜¯ï¼š
```
castle@[0,-64,0]~[99,-15,79]
```

### å¯¼å‡ºä»»åŠ¡çš„å‘½åè§„åˆ™

åœ¨å¯¼å‡ºä»»åŠ¡ä¸­ï¼ˆ`export_task.go`ï¼‰ï¼Œå‘½åè§„åˆ™ç•¥æœ‰ä¸åŒï¼š

```go
worldName := fmt.Sprintf("%s@[%d,%d,%d]~[%d,%d,%d]",
    filepath.Base(worldPath),
    e.StartPos.X(), e.StartPos.Y(), e.StartPos.Z(),
    e.EndPos.X(), e.EndPos.Y(), e.EndPos.Z(),
)
```

è¿™é‡Œä½¿ç”¨çš„æ˜¯å®é™…çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼Œè€Œä¸æ˜¯å›ºå®šçš„ `[0,-64,0]`ã€‚

### åæ ‡è§£æ

ç³»ç»Ÿå¯ä»¥è§£æè¿™ç§å‘½åæ ¼å¼æ¥æå–åæ ‡ä¿¡æ¯ï¼š

```go
// æ­£åˆ™è¡¨è¾¾å¼
var selectionRegex = regexp.MustCompile(`@\[(-?\d+),(-?\d+),(-?\d+)\]~\[(-?\d+),(-?\d+),(-?\d+)\]`)

// è§£æç¤ºä¾‹
"castle@[0,-64,0]~[99,-15,79]"
// è§£æç»“æœ:
// èµ·å§‹: (0, -64, 0)
// ç»“æŸ: (99, -15, 79)
```

### ç”¨é€”

1. **ä¸–ç•Œè¯†åˆ«**: é€šè¿‡ä¸–ç•Œåç§°å¯ä»¥å¿«é€Ÿè¯†åˆ«ç»“æ„çš„ä½ç½®å’Œå°ºå¯¸
2. **ç›´æ¥å¯¼å‡º**: ä» MCWorld å¯¼å‡ºæ—¶ï¼Œå¯ä»¥è§£ææ–‡ä»¶åæˆ–ä¸–ç•Œåç§°ä¸­çš„åæ ‡ä¿¡æ¯
3. **æ ¼å¼è½¬æ¢ä¼˜åŒ–**: å¦‚æœ MCWorld æ–‡ä»¶ååŒ…å«åæ ‡ä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºï¼Œæ— éœ€é‡æ–°è§£æ

## ğŸ” éªŒè¯

### æ ¼å¼æ•°é‡éªŒè¯

```go
// åœ¨ pool.go ä¸­
var StructureIDPool = map[uint8]StructureFunc{
    // å…± 37 ä¸ªæ¡ç›®
}
```

å®é™…ç»Ÿè®¡ï¼š
- Java ç‰ˆæ ¼å¼: 4
- åŸºå²©ç‰ˆæ ¼å¼: 2
- ç¬¬ä¸‰æ–¹å·¥å…·: 8
- å›½å†…å·¥å…·: 23
- **æ€»è®¡: 37 ç§æ ¼å¼**

### å‘½åè§„åˆ™éªŒè¯

æ‰€æœ‰è½¬æ¢ MCWorld çš„åœ°æ–¹éƒ½ä½¿ç”¨ç›¸åŒçš„å‘½åè§„åˆ™ï¼š
- âœ… `building_operations.go` (æ…¢é€Ÿ/å¿«é€Ÿè½¬æ¢)
- âœ… `build_task.go` (æ„å»ºä»»åŠ¡)
- âœ… `SchematicToMCWorld/main.go`
- âœ… `AnyStructureToMCWorld/main.go`
- âœ… `FatalderStructureTool/main.go`

## ğŸ“Œ æ€»ç»“

- **æ ¼å¼æ€»æ•°**: 37 ç§
- **å‘½åæ ¼å¼**: `{æ–‡ä»¶å}@[0,-64,0]~[{w-1},{h-65},{l-1}]`
- **åæ ‡è§£æ**: æ”¯æŒä»æ–‡ä»¶åæˆ–ä¸–ç•Œåç§°è§£æåæ ‡
- **ä¼˜åŒ–è·¯å¾„**: å¦‚æœæ–‡ä»¶ååŒ…å«åæ ‡ï¼Œå¯ä»¥ç›´æ¥ä» MCWorld å¯¼å‡º
