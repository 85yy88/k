# åŠŸèƒ½æ£€æŸ¥æ¸…å•

## âœ… å·²å®ç°çš„åŠŸèƒ½

### 1. ç»“æ„æ ¼å¼è½¬æ¢
- âœ… **ä»»æ„æ ¼å¼äº’è½¬** (`buildingOpsAnyToAny`)
  - æ”¯æŒæ‰€æœ‰æ ¼å¼ä¹‹é—´çš„è½¬æ¢
  - è‡ªåŠ¨æ£€æµ‹æºæ ¼å¼
  - æ”¯æŒæ‰€æœ‰ç›®æ ‡æ ¼å¼

- âœ… **ç»“æ„è½¬ MCWorld** (`buildingOpsConvertStructureToMCWorld`)
  - æ…¢é€Ÿæ¨¡å¼ï¼ˆæ ‡å‡†ï¼‰
  - å¿«é€Ÿæ¨¡å¼ï¼ˆå¤šçº¿ç¨‹ï¼Œ`convertReaderToMCWorldFast`ï¼‰
  - æ”¯æŒè¿›åº¦å›è°ƒ

- âœ… **MCWorld ä¼˜åŒ–è·¯å¾„** (`tryExportFromMCWorldSource`)
  - ç›´æ¥ä» MCWorld å¯¼å‡ºï¼Œæ— éœ€ä¸­é—´è½¬æ¢
  - æ”¯æŒåæ ‡è¾¹ç•Œè§£æï¼ˆ`parseSelectionBounds`ï¼‰
  - æ ¼å¼ï¼š`@[x1,y1,z1]~[x2,y2,z2]`

### 2. åœ°å›¾ç”»è½¬æ¢
- âœ… **å®Œæ•´åŠŸèƒ½** (`buildingOpsMapArt`)
  - å›¾ç‰‡è½¬åœ°å›¾ç”»
  - æ”¯æŒæ‰€æœ‰å›¾ç‰‡æ ¼å¼ï¼ˆJPG, PNG ç­‰ï¼‰
  - å¤šåœ°å›¾æ‹¼æ¥ï¼ˆå®½åº¦Ã—é«˜åº¦ï¼‰
  - 2D/3D æ¨¡å¼
  - è‡ªå®šä¹‰èµ·å§‹åæ ‡
  - ç¦ç”¨å‚è€ƒåˆ—é€‰é¡¹
  - æœ€å¤§ 3D é«˜åº¦é™åˆ¶

### 3. å­˜æ¡£åŠ å¯†/è§£å¯†
- âœ… **ç½‘æ˜“ç‰ˆåŠ å¯†** (`buildingOpsNeteaseCrypt(true)`)
  - æ”¯æŒ .mcworld æ–‡ä»¶
  - æ”¯æŒä¸–ç•Œç›®å½•
  - è‡ªåŠ¨å¤„ç† db ç›®å½•

- âœ… **ç½‘æ˜“ç‰ˆè§£å¯†** (`buildingOpsNeteaseCrypt(false)`)
  - æ”¯æŒ .mcworld æ–‡ä»¶
  - æ”¯æŒä¸–ç•Œç›®å½•
  - è‡ªåŠ¨å¤„ç† db ç›®å½•

### 4. è¾…åŠ©åŠŸèƒ½
- âœ… **æ–‡ä»¶è§£å‹/æ‰“åŒ…** (`unarchiveMCWorldToTempDir`, `archiveDirAsMCWorld`)
- âœ… **åæ ‡è§£æ** (`parseSelectionBounds`, `minInt32`, `maxInt32`)
- âœ… **å¿«é€Ÿè½¬æ¢** (`convertReaderToMCWorldFast`)
  - å¤šçº¿ç¨‹å¤„ç†
  - æ‰¹é‡å¤„ç†ï¼ˆ256 chunks/batchï¼‰
  - è‡ªåŠ¨ CPU æ ¸å¿ƒæ•°æ£€æµ‹

## ğŸ“‹ åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | æºç ä½ç½® | Termuxè„šæœ¬ | çŠ¶æ€ |
|------|---------|-----------|------|
| ä»»æ„æ ¼å¼è½¬æ¢ | `buildingOpsAnyToAny` | `convertStructure` | âœ… å·²å®ç° |
| æ…¢é€Ÿè½¬MCWorld | `buildingOpsConvertStructureToMCWorld(false)` | `convertStructure(..., false)` | âœ… å·²å®ç° |
| å¿«é€Ÿè½¬MCWorld | `buildingOpsConvertStructureToMCWorld(true)` | `convertStructure(..., true)` | âœ… å·²å®ç° |
| MCWorldä¼˜åŒ–è·¯å¾„ | `tryExportFromMCWorldSource` | `tryExportFromMCWorldSource` | âœ… å·²å®ç° |
| åæ ‡è¾¹ç•Œè§£æ | `parseSelectionBounds` | `parseSelectionBounds` | âœ… å·²å®ç° |
| å¿«é€Ÿè½¬æ¢å®ç° | `convertReaderToMCWorldFast` | `convertReaderToMCWorldFast` | âœ… å·²å®ç° |
| åœ°å›¾ç”»è½¬æ¢ | `buildingOpsMapArt` | `convertMapArt` | âœ… å·²å®ç° |
| åœ°å›¾ç”»æ‰€æœ‰é€‰é¡¹ | `opts.*` | `opts.*` | âœ… å·²å®ç° |
| ç½‘æ˜“åŠ å¯† | `buildingOpsNeteaseCrypt(true)` | `neteaseCrypt(..., true)` | âœ… å·²å®ç° |
| ç½‘æ˜“è§£å¯† | `buildingOpsNeteaseCrypt(false)` | `neteaseCrypt(..., false)` | âœ… å·²å®ç° |
| æ–‡ä»¶è§£å‹ | `unarchiveMCWorldToTempDir` | `unarchiveMCWorldToTempDir` | âœ… å·²å®ç° |
| æ–‡ä»¶æ‰“åŒ… | `archiveDirAsMCWorld` | `archiveDirAsMCWorld` | âœ… å·²å®ç° |

## ğŸ” è¯¦ç»†æ£€æŸ¥

### è½¬æ¢åŠŸèƒ½
- âœ… æ”¯æŒæ‰€æœ‰æ ¼å¼ï¼ˆé€šè¿‡ `StructureNamePool`ï¼‰
- âœ… è‡ªåŠ¨æ ¼å¼æ£€æµ‹
- âœ… é”™è¯¯å¤„ç†
- âœ… ä¸´æ—¶æ–‡ä»¶æ¸…ç†
- âœ… è¿›åº¦æ˜¾ç¤ºï¼ˆå·²ç®€åŒ–ï¼Œé€‚åˆå‘½ä»¤è¡Œï¼‰

### åœ°å›¾ç”»åŠŸèƒ½
- âœ… å›¾ç‰‡åŠ è½½ï¼ˆ`imaging.Open`ï¼‰
- âœ… æ‰€æœ‰é€‰é¡¹æ”¯æŒï¼š
  - `StartSubChunkPos` (x, y, z)
  - `MapWidth` / `MapHeight`
  - `Force2D`
  - `DisableReferenceColumn`
  - `Max3DHeight`
- âœ… ä¸–ç•Œæ–‡ä»¶/ç›®å½•å¤„ç†
- âœ… è¾“å‡ºæ–‡ä»¶è‡ªåŠ¨å‘½å

### åŠ å¯†/è§£å¯†åŠŸèƒ½
- âœ… .mcworld æ–‡ä»¶æ”¯æŒ
- âœ… ä¸–ç•Œç›®å½•æ”¯æŒ
- âœ… db ç›®å½•è‡ªåŠ¨æ£€æµ‹
- âœ… è¾“å‡ºæ–‡ä»¶å¤„ç†

### ä¼˜åŒ–åŠŸèƒ½
- âœ… MCWorld ç›´æ¥å¯¼å‡ºï¼ˆé¿å…ä¸­é—´è½¬æ¢ï¼‰
- âœ… å¿«é€Ÿæ¨¡å¼ï¼ˆå¤šçº¿ç¨‹ï¼‰
- âœ… åæ ‡è¾¹ç•Œè§£æï¼ˆä»æ–‡ä»¶å/ä¸–ç•Œåï¼‰

## ğŸ¯ å‘½ä»¤è¡Œå‚æ•°

### convert å‘½ä»¤
```bash
fatalder convert <è¾“å…¥> <æ ¼å¼> [è¾“å‡º] [--fast]
```
- âœ… åŸºæœ¬è½¬æ¢
- âœ… å¿«é€Ÿæ¨¡å¼é€‰é¡¹
- âœ… è‡ªåŠ¨è¾“å‡ºæ–‡ä»¶å

### mapart å‘½ä»¤
```bash
fatalder mapart <å›¾ç‰‡> <ä¸–ç•Œ> [é€‰é¡¹]
```
- âœ… --x, --y, --z (åæ ‡)
- âœ… --width, --height (å°ºå¯¸)
- âœ… --2d (å¼ºåˆ¶2D)
- âœ… --no-ref (ç¦ç”¨å‚è€ƒåˆ—)
- âœ… --max3d (æœ€å¤§3Dé«˜åº¦)

### encrypt/decrypt å‘½ä»¤
```bash
fatalder encrypt <ä¸–ç•Œæ–‡ä»¶/ç›®å½•>
fatalder decrypt <ä¸–ç•Œæ–‡ä»¶/ç›®å½•>
```
- âœ… æ–‡ä»¶/ç›®å½•è‡ªåŠ¨æ£€æµ‹
- âœ… è¾“å‡ºæ–‡ä»¶å¤„ç†

## âœ¨ æ€»ç»“

**æ‰€æœ‰åŠŸèƒ½å·²å®Œæ•´å®ç°ï¼Œæ— é—æ¼ï¼**

- âœ… æ‰€æœ‰è½¬æ¢åŠŸèƒ½
- âœ… æ‰€æœ‰åœ°å›¾ç”»é€‰é¡¹
- âœ… æ‰€æœ‰åŠ å¯†/è§£å¯†åŠŸèƒ½
- âœ… æ‰€æœ‰ä¼˜åŒ–åŠŸèƒ½
- âœ… æ‰€æœ‰è¾…åŠ©å‡½æ•°

ä»£ç å·²å®Œå…¨å¯¹é½æºç å®ç°ã€‚
