# Termux 二进制文件编译说明

## 方法一：在 Windows 上交叉编译（推荐）

### 前提条件
1. 安装 Go: https://golang.org/dl/
2. 确保 Go 版本 >= 1.18

### 编译步骤

1. **使用 PowerShell 脚本编译**（推荐）：
   ```powershell
   cd Termux脚本
   .\build-windows.ps1
   ```

2. **或者手动编译**：
   ```powershell
   cd Termux脚本
   $env:GOOS = "android"
   $env:GOARCH = "arm64"
   $env:CGO_ENABLED = "0"
   go mod download
   go build -ldflags="-s -w" -o fatalder-termux main.go
   ```

3. **编译完成后**：
   - 生成的文件：`fatalder-termux`
   - 将文件传输到 Android 设备
   - 在 Termux 中执行：
     ```bash
     chmod +x fatalder-termux
     ./fatalder-termux
     ```

## 方法二：在 Termux 中直接编译

### 前提条件
1. 在 Termux 中安装 Go：
   ```bash
   pkg install golang
   ```

### 编译步骤

1. **将源代码传输到 Termux**：
   - 可以通过 USB、网络共享等方式将 `Termux脚本` 目录传输到 Android 设备

2. **在 Termux 中编译**：
   ```bash
   cd ~/Termux脚本
   chmod +x build.sh
   ./build.sh
   ```

3. **或者手动编译**：
   ```bash
   cd ~/Termux脚本
   go mod download
   go build -ldflags="-s -w" -o fatalder-termux main.go
   chmod +x fatalder-termux
   ```

## 安装到系统 PATH（可选）

编译完成后，可以将二进制文件移动到系统 PATH，方便在任何位置使用：

```bash
mv fatalder-termux ~/../usr/bin/fatalder
fatalder  # 现在可以在任何位置直接使用
```

## 文件说明

- `build.sh` - Linux/Termux 编译脚本
- `build-windows.ps1` - Windows PowerShell 交叉编译脚本
- `fatalder-termux` - 编译生成的二进制文件（ARM64）

## 注意事项

1. **架构说明**：
   - Termux 默认使用 ARM64 架构
   - 如果设备是 x86_64 架构，需要修改 `GOARCH` 为 `amd64`

2. **文件权限**：
   - 传输到 Android 后，记得执行 `chmod +x fatalder-termux` 添加执行权限

3. **依赖问题**：
   - 如果编译时遇到依赖问题，确保 `go.mod` 中的 replace 路径正确
   - 确保 `源码/modules/WaterStructure` 和 `源码/modules/blocks` 目录存在
